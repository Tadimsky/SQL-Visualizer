<!DOCTYPE HTML>
<HTML>
  <HEAD>
    <TITLE>DB Project</TITLE>
    <script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
  </HEAD>
  <BODY>

  <script type="text/javascript">
  var createTable = function(svg, table, x, y) {

    var tableW = 150;
    var tableH = 200;
    var padding = 20;

    var rects = svg.selectAll("body")
    .data(table)
    .enter()
    .append("svg:g")
    .attr("transform", function(d, i) {
      return "translate(" + x + ", " + y + ")";
    });


    rects
    .append("rect")
    .attr("width", tableW)
    .attr("height", function(d){
      var length = d.columns.length;
      return length * 30 + 25;
    })
    .attr("stroke", "black")
    .attr("stroke-width", 5)
    .attr("ry", padding)
    .attr("rx", padding)
    .attr("fill", function(d,i) {
      // return "rgb(34,245,185)";
      return "rgb(73,119,188)";
    });


    //headers
    rects
    .append("svg:text")
    .text(function(d){
      return d.name
    })
    .attr("dx", tableW / 2)
    .attr("dy", 15)
    .attr("width", 100)
    .attr("height", 20)
    .attr("font-size", 16)
    .attr("fill", "white")
    .attr("font-weight", "bold")
    .attr("text-anchor", "middle");

    rects
    .append("line")
    .attr("x1", 0)
    .attr("y1", padding)
    .attr("x2", tableW)
    .attr("y2", padding)
    .attr("stroke", "black")
    .attr("stroke-width", 3);


    //columns
    rects.selectAll("g")
    .data(function(d) {
      return d.columns;
    })
    .enter()
    .append("text")
    .text(function(d) {
      return d.name;
    })
    .attr("dx", tableW / 2)
    .attr("dy", function(d,i){
      return 25*(i+1) + padding;
    })
    .attr("fill", function(d){
      return d.selected ? "yellow" : "white";
    })
    .attr("text-anchor", "middle")
    .attr("width", 100)
    .attr("height", 20);
  };
  var w = 1000;
  var h = 1000;

  var svg = d3.select("body").append("svg")
  .attr("width", w)
  .attr("height", h);


  var table = [
  {name: "Book",
  columns: [{name: "Author", selected: true},
  {name: "Genre", selected: true},
  {name: "Type", selected: false},
  {name: "Yolomir the Mighty", selected:true}]
}];

var t = [
  {name: "Book",
  columns: [{name: "Author", selected: false},
  {name: "Genre", selected: true},
  {name: "Type", selected: false},
  {name: "Yolomir the Unmighty", selected:true}]
}];


var x = 10;
var y = 100;

createTable(svg, table, x, y);
createTable(svg, table, 100, 30);
createTable(svg, t, 500, 500);

</script>
</BODY>
</HTML>
